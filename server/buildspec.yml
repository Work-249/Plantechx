version: 0.2
    # AWS_REGION is reserved; do not set it here
phases:
  install:
    runtime-versions:
      nodejs: 18
    commands:
      - echo "ðŸ”§ Installing Serverless CLI globally..."
      - npm install -g serverless
      - serverless --version
      - echo "ðŸ“¦ Installing project dependencies..."
      - npm install
  pre_build:
    commands:
      - echo "ðŸ§¹ Cleaning previous builds..."
      - rm -rf .serverless
  build:
    commands:
      - echo "ðŸš€ Deploying backend to AWS Lambda using Serverless..."
      - serverless deploy --stage prod --region ap-south-1 --verbose
artifacts:
  files:
    - serverless.yml
    - package.json
    - server.js
    - server/**/*
  discard-paths: no
